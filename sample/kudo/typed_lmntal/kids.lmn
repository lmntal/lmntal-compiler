// 手をつなぐ子供の例題
//　2引数groundを用いると「わっか」を見つけることができるので、
//　1人ぼっちを防ぐプログラムが書ける。

// まず自分で両手を繋いでしまう。
SelfLoop@@
kid(lfree,rfree) :- kid(Free,Free).

// 2つのわっかを混ぜる
LoopMerge@@
kid(L1,R1),$loop1[L1,R1],kid(L2,R2),$loop2[L2,R2]:- 
ground($loop1), ground($loop2) |
kid(L3,R3),$loop1[L3,R4],kid(L4,R4),$loop2[L4,R3].

//　子供の生産
kids($num) :- $num > 0 | kid(lfree,rfree), kids($num-1).
kids($num) :- $num=:=0 | ().

kids(20).